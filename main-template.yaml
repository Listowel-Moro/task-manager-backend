#AWSTemplateFormatVersion: '2010-09-09'
#Transform: AWS::Serverless-2016-10-31
#Description: Task Management System Backend - Main Template
#
#Resources:
#  CognitoStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: cognito-template.yaml
#      Parameters:
#        TeamMemberSubscriptionStepFunctionArn: !GetAtt StepFunctionsStack.Outputs.TeamMemberSubscriptionStepFunctionArn
#        TaskAssignmentNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.TaskAssignmentNotificationTopicArn
#      Tags:
#        - Key: Component
#          Value: Cognito
#
#  SnsSqsStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: sns-sqs-template.yaml
#      Tags:
#        - Key: Component
#          Value: SNS-SQS
#
#  StepFunctionsStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: step-functions-template.yaml
#      Parameters:
#        TaskAssignmentNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.TaskAssignmentNotificationTopicArn
#        TaskDeadlineNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.TaskDeadlineNotificationTopicArn
#        ClosedTasksNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.ClosedTasksNotificationTopicArn
#      Tags:
#        - Key: Component
#          Value: StepFunctions
#
#  LambdaFunctionsStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: lamda-template.yaml
#      Parameters:
#        UserPoolId: !GetAtt CognitoStack.Outputs.UserPoolId
#        UserPoolClientId: !GetAtt CognitoStack.Outputs.UserPoolClientId
#        TasksTableName: !GetAtt DynamoDBStack.Outputs.TasksTableName
#        TaskAssignmentQueueArn: !GetAtt SnsSqsStack.Outputs.TaskAssignmentQueueArn
#        TaskAssignmentNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.TaskAssignmentNotificationTopicArn
#        TaskDeadlineNotificationTopic: !GetAtt SnsSqsStack.Outputs.TaskDeadlineNotificationTopicArn
#        TaskExpirationNotificationTopic: !GetAtt SnsSqsStack.Outputs.TaskExpirationNotificationTopicArn
#        Environment: Production
#
#
#  DynamoDBStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: dynamodb-template.yaml
#      Tags:
#        - Key: Component
#          Value: DynamoDB
#
#  EventStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: event-template.yaml
#      Parameters:
#        Environment: Production  # Or use a parameter from main template
#      Tags:
#        - Key: Component
#          Value: Events
#  NotificationStack:
#    Type: AWS::CloudFormation::Stack
#    Properties:
#      TemplateURL: notification-lambda-template.yaml
#      Parameters:
#        Environment: Production
#        TasksTableArn: !GetAtt DynamoDBStack.Outputs.TasksTableArn  # Assuming you have a DynamoDB stack
#        TasksTableName: !GetAtt DynamoDBStack.Outputs.TasksTableName
#        TasksTableStreamArn: !GetAtt DynamoDBStack.Outputs.TasksTableStreamArn
#        UserPoolId: !GetAtt CognitoStack.Outputs.UserPoolId
#        NotificationTopicArn: !GetAtt SnsSqsStack.Outputs.EmailNotificationTopicArn
#        EventBridgeSchedulerRoleArn: !GetAtt EventStack.Outputs.EventBridgeSchedulerRoleArn
#        AccountId: !Ref AWS::AccountId
#        Region: !Ref AWS::Region
#        TaskDeadlineNotificationTopicArn: !GetAtt SnsSqsStack.Outputs.TaskDeadlineNotificationTopicArn
#      Tags:
#        - Key: Component
#          Value: Notification
#Outputs:
#  ApiUrlCognito:
#    Description: API Gateway endpoint URL
#    Value: !GetAtt CognitoStack.Outputs.ApiUrl
#
#  EventBridgeSchedulerRoleArn:
#    Description: EventBridge Scheduler Role ARN
#    Value: !GetAtt EventStack.Outputs.EventBridgeSchedulerRoleArn
#  CreateDeadlineEventLambdaArn:
#    Description: ARN of the Create Deadline Event Lambda
#    Value: !GetAtt NotificationStack.Outputs.CreateDeadlineEventLambdaArn
#  ReminderProcessorLambdaArn:
#    Description: ARN of the Reminder Processor Lambda
#    Value: !GetAtt NotificationStack.Outputs.ReminderProcessorLambdaArn
#  UpdateTaskScheduleLambdaArn:
#    Description: ARN of the Update Task Schedule Lambda
#    Value: !GetAtt NotificationStack.Outputs.UpdateTaskScheduleLambdaArn